<div fxLayout="column" fxFlexFill>
  <h1 fxLayoutAlign="center start">
    Skill : {{activeSkillName}}<br>
  </h1>

  <!-- -------------GP Table View------------- -->
  <table mat-table [dataSource]="gpDataSource" *ngIf="showGp">

    <!-- Rank Column -->
    <ng-container matColumnDef="rank">
      <th mat-header-cell *matHeaderCellDef> Rank </th>
      <td mat-cell *matCellDef="let rankRow"> {{rankRow.rank}} </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> Name </th>
      <td mat-cell *matCellDef="let rankRow"> {{rankRow.name}} </td>
    </ng-container>

    <!-- GP Column -->
    <ng-container matColumnDef="gp">
      <th mat-header-cell *matHeaderCellDef> GP </th>
      <td mat-cell *matCellDef="let rankRow"> {{numberWithCommas(rankRow.gp)}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="GP_COLUMNS"></tr>
    <tr mat-row *matRowDef="let row; columns: GP_COLUMNS;"></tr>
  </table>

  <!-- -------------Combat Table View------------- -->
  <table mat-table [dataSource]="skillDataSource" *ngIf="showCombat">

    <!-- Rank Column -->
    <ng-container matColumnDef="rank">
      <th mat-header-cell *matHeaderCellDef> Rank </th>
      <td mat-cell *matCellDef="let rankRow"> {{rankRow.rank}} </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> Name </th>
      <td mat-cell *matCellDef="let rankRow"> {{rankRow.name}} </td>
    </ng-container>

    <!-- Level Column -->
    <ng-container matColumnDef="level">
      <th mat-header-cell *matHeaderCellDef> Level </th>
      <td mat-cell *matCellDef="let rankRow"> {{rankRow.level}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="COMBAT_COLUMNS"></tr>
    <tr mat-row *matRowDef="let row; columns: COMBAT_COLUMNS;"></tr>
  </table>

  <!-- -------------Skill Table View------------- -->
  <table mat-table [dataSource]="skillDataSource" *ngIf="showSkill">

    <!-- Rank Column -->
    <ng-container matColumnDef="rank">
      <th mat-header-cell *matHeaderCellDef> Rank </th>
      <td mat-cell *matCellDef="let rankRow"> {{rankRow.rank}} </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> Name </th>
      <td mat-cell *matCellDef="let rankRow"> {{rankRow.name}} </td>
    </ng-container>

    <!-- Level Column -->
    <ng-container matColumnDef="level">
      <th mat-header-cell *matHeaderCellDef> Level </th>
      <td mat-cell *matCellDef="let rankRow"> {{rankRow.level}} </td>
    </ng-container>

    <!-- XP Column -->
    <ng-container matColumnDef="xp">
      <th mat-header-cell *matHeaderCellDef> XP </th>
      <td mat-cell *matCellDef="let rankRow"> {{numberWithCommas(rankRow.xp)}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="SKILL_COLUMNS"></tr>
    <tr mat-row *matRowDef="let row; columns: SKILL_COLUMNS;"></tr>
  </table>

  <p fxLayoutAlign="center start">
    <a href='javascript:!function(){var e={Woodcutting:0,Fishing:1,Firemaking:2,Cooking:3,Mining:4,Smithing:5,Attack:6,Strength:7,Defence:8,Hitpoints:9,Thieving:10,Farming:11,Ranged:12,Fletching:13,Crafting:14,Runecrafting:15,Magic:16,Prayer:17,Slayer:18,Herblore:19},n=21,i={Total:null,Attack:e.Attack,Strength:e.Strength,Defence:e.Defence,Hitpoints:e.Hitpoints,Ranged:e.Ranged,Magic:e.Magic,Prayer:e.Prayer,Slayer:e.Slayer,Woodcutting:e.Woodcutting,Fishing:e.Fishing,Firemaking:e.Firemaking,Cooking:e.Cooking,Mining:e.Mining,Smithing:e.Smithing,Thieving:e.Thieving,Farming:e.Farming,Fletching:e.Fletching,Crafting:e.Crafting,Runecrafting:e.Runecrafting,Herblore:e.Herblore};function t(){let t={};const l=["skillLevel","skillXP","username"];let a=new Array(n),r=new Array(n);for(let n=0;n<allVars.length;n++)if(l.includes(allVars[n]))if("skillLevel"==allVars[n]){skillLevel=getItem(key+allVars[n]);let l=0;for(let n in i)l>0&&(a[l]=skillLevel[e[n]]),l+=1;a[0]=a.reduce((e,n)=>e+n,0),t[allVars[n]]=a}else if("skillXP"==allVars[n]){skillXP=getItem(key+allVars[n]);let l=0;for(let n in i)l>0&&(r[l]=skillXP[e[n]]),l+=1;r[0]=r.reduce((e,n)=>e+n,0),t[allVars[n]]=r}else"username"==allVars[n]&&(username=getItem(key+allVars[n]),t[allVars[n]]=username);return t}!function(){let[e,n]=function(e,n){combinedJson={};for(let n in e)combinedJson[n]=e[n];for(let e in n)combinedJson[e]=n[e];console.log(combinedJson);const i=pako.gzip(JSON.stringify(combinedJson),{to:"string"});return[combinedJson.username,btoa(i)]}(function(){dataJson={};let e=0,n=0;for(let e=0;e<equippedItems.length;e++)e==CONSTANTS.equipmentSlot.Quiver?n+=items[equippedItems[e]].sellsFor*ammo:n+=1*items[equippedItems[e]].sellsFor;e+=n;let i=0;for(let e=0;e<bank.length;e++)i+=items[bank[e].id].sellsFor*bank[e].qty;return e+=i,e+=gp,e+=statsGeneral[0].count,dataJson.gp=e,dataJson}(),t());!function(e,n){$.ajax({url:"https://l9ahyalvt7.execute-api.us-east-1.amazonaws.com/prod/users/"+e,type:"POST",async:!0,data:JSON.stringify({data:n}),success:function(n){console.log("Updated hiscores for user: "+e)}})}(e,n)}()}();' style="color: white; margin-top: 16px;">1.0.1_MelvorIdle_Bookmarklet</a>
  </p>


</div>
